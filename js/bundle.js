(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
!function(t,r){t.tracking=t.tracking||{},tracking.inherits=function(t,r){function e(){}e.prototype=r.prototype,t.superClass_=r.prototype,t.prototype=new e,t.prototype.constructor=t,t.base=function(t,e){var n=Array.prototype.slice.call(arguments,2);return r.prototype[e].apply(t,n)}},tracking.initUserMedia_=function(r,e){t.navigator.getUserMedia({video:!0,audio:!(!e||!e.audio)},function(e){try{r.src=t.URL.createObjectURL(e)}catch(t){r.src=e}},function(){throw Error("Cannot capture user camera.")})},tracking.isNode=function(t){return t.nodeType||this.isWindow(t)},tracking.isWindow=function(t){return!!(t&&t.alert&&t.document)},tracking.one=function(t,r){return this.isNode(t)?t:(r||document).querySelector(t)},tracking.track=function(t,r,e){if(!(t=tracking.one(t)))throw new Error("Element not found, try a different element or selector.");if(!r)throw new Error("Tracker not specified, try `tracking.track(element, new tracking.FaceTracker())`.");switch(t.nodeName.toLowerCase()){case"canvas":return this.trackCanvas_(t,r,e);case"img":return this.trackImg_(t,r,e);case"video":return e&&e.camera&&this.initUserMedia_(t,e),this.trackVideo_(t,r,e);default:throw new Error("Element not supported, try in a canvas, img, or video.")}},tracking.trackCanvas_=function(t,r){var e=this,n=new tracking.TrackerTask(r);return n.on("run",function(){e.trackCanvasInternal_(t,r)}),n.run()},tracking.trackCanvasInternal_=function(t,r){var e=t.width,n=t.height,i=t.getContext("2d").getImageData(0,0,e,n);r.track(i.data,e,n)},tracking.trackImg_=function(t,r){var e=t.width,n=t.height,i=document.createElement("canvas");i.width=e,i.height=n;var a=new tracking.TrackerTask(r);return a.on("run",function(){tracking.Canvas.loadImage(i,t.src,0,0,e,n,function(){tracking.trackCanvasInternal_(i,r)})}),a.run()},tracking.trackVideo_=function(r,e){var n,i,a,o=document.createElement("canvas"),c=o.getContext("2d"),s=function(){n=r.offsetWidth,i=r.offsetHeight,o.width=n,o.height=i};s(),r.addEventListener("resize",s);var h=function(){a=t.requestAnimationFrame(function(){if(r.readyState===r.HAVE_ENOUGH_DATA){try{c.drawImage(r,0,0,n,i)}catch(t){}tracking.trackCanvasInternal_(o,e)}h()})},g=new tracking.TrackerTask(e);return g.on("stop",function(){t.cancelAnimationFrame(a)}),g.on("run",function(){h()}),g.run()},t.URL||(t.URL=t.URL||t.webkitURL||t.msURL||t.oURL),navigator.getUserMedia||(navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia)}(window),tracking.EventEmitter=function(){},tracking.EventEmitter.prototype.events_=null,tracking.EventEmitter.prototype.addListener=function(t,r){if("function"!=typeof r)throw new TypeError("Listener must be a function");return this.events_||(this.events_={}),this.emit("newListener",t,r),this.events_[t]||(this.events_[t]=[]),this.events_[t].push(r),this},tracking.EventEmitter.prototype.listeners=function(t){return this.events_&&this.events_[t]},tracking.EventEmitter.prototype.emit=function(t){var r=this.listeners(t);if(r){for(var e=Array.prototype.slice.call(arguments,1),n=0;n<r.length;n++)r[n]&&r[n].apply(this,e);return!0}return!1},tracking.EventEmitter.prototype.on=tracking.EventEmitter.prototype.addListener,tracking.EventEmitter.prototype.once=function(t,r){var e=this;e.on(t,function n(){e.removeListener(t,n),r.apply(this,arguments)})},tracking.EventEmitter.prototype.removeAllListeners=function(t){return this.events_?(t?delete this.events_[t]:delete this.events_,this):this},tracking.EventEmitter.prototype.removeListener=function(t,r){if("function"!=typeof r)throw new TypeError("Listener must be a function");if(!this.events_)return this;var e=this.listeners(t);if(Array.isArray(e)){var n=e.indexOf(r);if(n<0)return this;e.splice(n,1)}return this},tracking.EventEmitter.prototype.setMaxListeners=function(){throw new Error("Not implemented")},tracking.Canvas={},tracking.Canvas.loadImage=function(t,r,e,n,i,a,o){var c=this,s=new window.Image;s.crossOrigin="*",s.onload=function(){var r=t.getContext("2d");t.width=i,t.height=a,r.drawImage(s,e,n,i,a),o&&o.call(c),s=null},s.src=r},tracking.DisjointSet=function(t){if(void 0===t)throw new Error("DisjointSet length not specified.");this.length=t,this.parent=new Uint32Array(t);for(var r=0;r<t;r++)this.parent[r]=r},tracking.DisjointSet.prototype.length=null,tracking.DisjointSet.prototype.parent=null,tracking.DisjointSet.prototype.find=function(t){return this.parent[t]===t?t:this.parent[t]=this.find(this.parent[t])},tracking.DisjointSet.prototype.union=function(t,r){var e=this.find(t),n=this.find(r);this.parent[e]=n},tracking.Image={},tracking.Image.blur=function(t,r,e,n){if((n=Math.abs(n))<=1)throw new Error("Diameter should be greater than 1.");for(var i=n/2,a=Math.ceil(n)+(1-Math.ceil(n)%2),o=new Float32Array(a),c=(i+.5)/3,s=c*c,h=1/Math.sqrt(2*Math.PI*s),g=-1/(2*c*c),k=0,f=Math.floor(a/2),u=0;u<a;u++){var l=u-f,p=h*Math.exp(l*l*g);o[u]=p,k+=p}for(var v=0;v<o.length;v++)o[v]/=k;return this.separableConvolve(t,r,e,o,o,!1)},tracking.Image.computeIntegralImage=function(t,r,e,n,i,a,o){if(arguments.length<4)throw new Error("You should specify at least one output array in the order: sum, square, tilted, sobel.");var c;o&&(c=tracking.Image.sobel(t,r,e));for(var s=0;s<e;s++)for(var h=0;h<r;h++){var g=s*r*4+4*h,k=~~(.299*t[g]+.587*t[g+1]+.114*t[g+2]);if(n&&this.computePixelValueSAT_(n,r,s,h,k),i&&this.computePixelValueSAT_(i,r,s,h,k*k),a){var f=g-4*r,u=~~(.299*t[f]+.587*t[f+1]+.114*t[f+2]);this.computePixelValueRSAT_(a,r,s,h,k,u||0)}o&&this.computePixelValueSAT_(o,r,s,h,c[g])}},tracking.Image.computePixelValueRSAT_=function(t,r,e,n,i,a){var o=e*r+n;t[o]=(t[o-r-1]||0)+(t[o-r+1]||0)-(t[o-r-r]||0)+i+a},tracking.Image.computePixelValueSAT_=function(t,r,e,n,i){var a=e*r+n;t[a]=(t[a-r]||0)+(t[a-1]||0)+i-(t[a-r-1]||0)},tracking.Image.grayscale=function(t,r,e,n){for(var i=new Uint8ClampedArray(n?t.length:t.length>>2),a=0,o=0,c=0;c<e;c++)for(var s=0;s<r;s++){var h=.299*t[o]+.587*t[o+1]+.114*t[o+2];i[a++]=h,n&&(i[a++]=h,i[a++]=h,i[a++]=t[o+3]),o+=4}return i},tracking.Image.horizontalConvolve=function(t,r,e,n,i){for(var a=n.length,o=Math.floor(a/2),c=new Float32Array(r*e*4),s=i?1:0,h=0;h<e;h++)for(var g=0;g<r;g++){for(var k=h,f=g,u=4*(h*r+g),l=0,p=0,v=0,m=0,y=0;y<a;y++){var d=4*(k*r+Math.min(r-1,Math.max(0,f+y-o))),w=n[y];l+=t[d]*w,p+=t[d+1]*w,v+=t[d+2]*w,m+=t[d+3]*w}c[u]=l,c[u+1]=p,c[u+2]=v,c[u+3]=m+s*(255-m)}return c},tracking.Image.verticalConvolve=function(t,r,e,n,i){for(var a=n.length,o=Math.floor(a/2),c=new Float32Array(r*e*4),s=i?1:0,h=0;h<e;h++)for(var g=0;g<r;g++){for(var k=h,f=g,u=4*(h*r+g),l=0,p=0,v=0,m=0,y=0;y<a;y++){var d=4*(Math.min(e-1,Math.max(0,k+y-o))*r+f),w=n[y];l+=t[d]*w,p+=t[d+1]*w,v+=t[d+2]*w,m+=t[d+3]*w}c[u]=l,c[u+1]=p,c[u+2]=v,c[u+3]=m+s*(255-m)}return c},tracking.Image.separableConvolve=function(t,r,e,n,i,a){var o=this.verticalConvolve(t,r,e,i,a);return this.horizontalConvolve(o,r,e,n,a)},tracking.Image.sobel=function(t,r,e){t=this.grayscale(t,r,e,!0);for(var n=new Float32Array(r*e*4),i=new Float32Array([-1,0,1]),a=new Float32Array([1,2,1]),o=this.separableConvolve(t,r,e,i,a),c=this.separableConvolve(t,r,e,a,i),s=0;s<n.length;s+=4){var h=o[s],g=c[s],k=Math.sqrt(g*g+h*h);n[s]=k,n[s+1]=k,n[s+2]=k,n[s+3]=255}return n},tracking.ViolaJones={},tracking.ViolaJones.REGIONS_OVERLAP=.5,tracking.ViolaJones.classifiers={},tracking.ViolaJones.detect=function(t,r,e,n,i,a,o,c){var s,h=0,g=[],k=new Int32Array(r*e),f=new Int32Array(r*e),u=new Int32Array(r*e);o>0&&(s=new Int32Array(r*e)),tracking.Image.computeIntegralImage(t,r,e,k,f,u,s);for(var l=c[0],p=c[1],v=n*i,m=v*l|0,y=v*p|0;m<r&&y<e;){for(var d=v*a+.5|0,w=0;w<e-y;w+=d)for(var T=0;T<r-m;T+=d)o>0&&this.isTriviallyExcluded(o,s,w,T,r,m,y)||this.evalStages_(c,k,f,u,w,T,r,m,y,v)&&(g[h++]={width:m,height:y,x:T,y:w});m=(v*=i)*l|0,y=v*p|0}return this.mergeRectangles_(g)},tracking.ViolaJones.isTriviallyExcluded=function(t,r,e,n,i,a,o){var c=e*i+n,s=c+a,h=c+o*i,g=h+a;return(r[c]-r[s]-r[h]+r[g])/(a*o*255)<t},tracking.ViolaJones.evalStages_=function(t,r,e,n,i,a,o,c,s,h){var g=1/(c*s),k=i*o+a,f=k+c,u=k+s*o,l=u+c,p=(r[k]-r[f]-r[u]+r[l])*g,v=(e[k]-e[f]-e[u]+e[l])*g-p*p,m=1;v>0&&(m=Math.sqrt(v));for(var y=t.length,d=2;d<y;){for(var w=0,T=t[d++],C=t[d++];C--;){for(var _=0,E=t[d++],M=t[d++],x=0;x<M;x++){var I,b,O,A,S=a+t[d++]*h+.5|0,D=i+t[d++]*h+.5|0,R=t[d++]*h+.5|0,j=t[d++]*h+.5|0,F=t[d++];E?(b=S+(D-1)*o,O=S-j+(D+j-1)*o,A=S+R+(D+R-1)*o,_+=(n[I=S-j+R+(D+R+j-1)*o]+n[b]-n[O]-n[A])*F):(b=(I=D*o+S)+R,A=(O=I+j*o)+R,_+=(r[I]-r[b]-r[O]+r[A])*F)}var L=t[d++],V=t[d++],U=t[d++];w+=_*g<L*m?V:U}if(w<T)return!1}return!0},tracking.ViolaJones.mergeRectangles_=function(t){for(var r=new tracking.DisjointSet(t.length),e=0;e<t.length;e++)for(var n=t[e],i=0;i<t.length;i++){var a=t[i];if(tracking.Math.intersectRect(n.x,n.y,n.x+n.width,n.y+n.height,a.x,a.y,a.x+a.width,a.y+a.height)){var o=Math.max(n.x,a.x),c=Math.max(n.y,a.y),s=(o-Math.min(n.x+n.width,a.x+a.width))*(c-Math.min(n.y+n.height,a.y+a.height)),h=n.width*n.height,g=a.width*a.height;s/(h*(h/g))>=this.REGIONS_OVERLAP&&s/(g*(h/g))>=this.REGIONS_OVERLAP&&r.union(e,i)}}for(var k={},f=0;f<r.length;f++){var u=r.find(f);k[u]?(k[u].total++,k[u].width+=t[f].width,k[u].height+=t[f].height,k[u].x+=t[f].x,k[u].y+=t[f].y):k[u]={total:1,width:t[f].width,height:t[f].height,x:t[f].x,y:t[f].y}}var l=[];return Object.keys(k).forEach(function(t){var r=k[t];l.push({total:r.total,width:r.width/r.total+.5|0,height:r.height/r.total+.5|0,x:r.x/r.total+.5|0,y:r.y/r.total+.5|0})}),l},tracking.Brief={},tracking.Brief.N=512,tracking.Brief.randomImageOffsets_={},tracking.Brief.randomWindowOffsets_=null,tracking.Brief.getDescriptors=function(t,r,e){for(var n=new Int32Array((e.length>>1)*(this.N>>5)),i=0,a=this.getRandomOffsets_(r),o=0,c=0;c<e.length;c+=2)for(var s=r*e[c+1]+e[c],h=0,g=0,k=this.N;g<k;g++)t[a[h++]+s]<t[a[h++]+s]&&(i|=1<<(31&g)),g+1&31||(n[o++]=i,i=0);return n},tracking.Brief.match=function(t,r,e,n){for(var i=t.length>>1,a=e.length>>1,o=new Array(i),c=0;c<i;c++){for(var s=1/0,h=0,g=0;g<a;g++){for(var k=0,f=0,u=this.N>>5;f<u;f++)k+=tracking.Math.hammingWeight(r[c*u+f]^n[g*u+f]);k<s&&(s=k,h=g)}o[c]={index1:c,index2:h,keypoint1:[t[2*c],t[2*c+1]],keypoint2:[e[2*h],e[2*h+1]],confidence:1-s/this.N}}return o},tracking.Brief.reciprocalMatch=function(t,r,e,n){var i=[];if(0===t.length||0===e.length)return i;for(var a=tracking.Brief.match(t,r,e,n),o=tracking.Brief.match(e,n,t,r),c=0;c<a.length;c++)o[a[c].index2].index2===c&&i.push(a[c]);return i},tracking.Brief.getRandomOffsets_=function(t){if(!this.randomWindowOffsets_){for(var r=0,e=new Int32Array(4*this.N),n=0;n<this.N;n++)e[r++]=Math.round(tracking.Math.uniformRandom(-15,16)),e[r++]=Math.round(tracking.Math.uniformRandom(-15,16)),e[r++]=Math.round(tracking.Math.uniformRandom(-15,16)),e[r++]=Math.round(tracking.Math.uniformRandom(-15,16));this.randomWindowOffsets_=e}if(!this.randomImageOffsets_[t]){for(var i=0,a=new Int32Array(2*this.N),o=0;o<this.N;o++)a[i++]=this.randomWindowOffsets_[4*o]*t+this.randomWindowOffsets_[4*o+1],a[i++]=this.randomWindowOffsets_[4*o+2]*t+this.randomWindowOffsets_[4*o+3];this.randomImageOffsets_[t]=a}return this.randomImageOffsets_[t]},tracking.Fast={},tracking.Fast.THRESHOLD=40,tracking.Fast.circles_={},tracking.Fast.findCorners=function(t,r,e,n){var i=this.getCircleOffsets_(r),a=new Int32Array(16),o=[];void 0===n&&(n=this.THRESHOLD);for(var c=3;c<e-3;c++)for(var s=3;s<r-3;s++){for(var h=c*r+s,g=t[h],k=0;k<16;k++)a[k]=t[h+i[k]];this.isCorner(g,a,n)&&(o.push(s,c),s+=3)}return o},tracking.Fast.isBrighter=function(t,r,e){return t-r>e},tracking.Fast.isCorner=function(t,r,e){if(this.isTriviallyExcluded(r,t,e))return!1;for(var n=0;n<16;n++){for(var i=!0,a=!0,o=0;o<9;o++){var c=r[n+o&15];if(!this.isBrighter(t,c,e)&&(a=!1,!1===i))break;if(!this.isDarker(t,c,e)&&(i=!1,!1===a))break}if(a||i)return!0}return!1},tracking.Fast.isDarker=function(t,r,e){return r-t>e},tracking.Fast.isTriviallyExcluded=function(t,r,e){var n=0,i=t[8],a=t[12],o=t[4],c=t[0];return this.isBrighter(c,r,e)&&n++,this.isBrighter(o,r,e)&&n++,this.isBrighter(i,r,e)&&n++,this.isBrighter(a,r,e)&&n++,n<3&&(n=0,this.isDarker(c,r,e)&&n++,this.isDarker(o,r,e)&&n++,this.isDarker(i,r,e)&&n++,this.isDarker(a,r,e)&&n++,n<3)},tracking.Fast.getCircleOffsets_=function(t){if(this.circles_[t])return this.circles_[t];var r=new Int32Array(16);return r[0]=-t-t-t,r[1]=r[0]+1,r[2]=r[1]+t+1,r[3]=r[2]+t+1,r[4]=r[3]+t,r[5]=r[4]+t,r[6]=r[5]+t-1,r[7]=r[6]+t-1,r[8]=r[7]-1,r[9]=r[8]-1,r[10]=r[9]-t-1,r[11]=r[10]-t-1,r[12]=r[11]-t,r[13]=r[12]-t,r[14]=r[13]-t+1,r[15]=r[14]-t+1,this.circles_[t]=r,r},tracking.Math={},tracking.Math.distance=function(t,r,e,n){var i=e-t,a=n-r;return Math.sqrt(i*i+a*a)},tracking.Math.hammingWeight=function(t){return 16843009*((t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135)>>24},tracking.Math.uniformRandom=function(t,r){return t+Math.random()*(r-t)},tracking.Math.intersectRect=function(t,r,e,n,i,a,o,c){return!(i>e||o<t||a>n||c<r)},tracking.Matrix={},tracking.Matrix.forEach=function(t,r,e,n,i){i=i||1;for(var a=0;a<e;a+=i)for(var o=0;o<r;o+=i){var c=a*r*4+4*o;n.call(this,t[c],t[c+1],t[c+2],t[c+3],c,a,o)}},tracking.EPnP={},tracking.EPnP.solve=function(t,r,e){},tracking.Tracker=function(){tracking.Tracker.base(this,"constructor")},tracking.inherits(tracking.Tracker,tracking.EventEmitter),tracking.Tracker.prototype.track=function(){},tracking.TrackerTask=function(t){if(tracking.TrackerTask.base(this,"constructor"),!t)throw new Error("Tracker instance not specified.");this.setTracker(t)},tracking.inherits(tracking.TrackerTask,tracking.EventEmitter),tracking.TrackerTask.prototype.tracker_=null,tracking.TrackerTask.prototype.running_=!1,tracking.TrackerTask.prototype.getTracker=function(){return this.tracker_},tracking.TrackerTask.prototype.inRunning=function(){return this.running_},tracking.TrackerTask.prototype.setRunning=function(t){this.running_=t},tracking.TrackerTask.prototype.setTracker=function(t){this.tracker_=t},tracking.TrackerTask.prototype.run=function(){var t=this;if(!this.inRunning())return this.setRunning(!0),this.reemitTrackEvent_=function(r){t.emit("track",r)},this.tracker_.on("track",this.reemitTrackEvent_),this.emit("run"),this},tracking.TrackerTask.prototype.stop=function(){if(this.inRunning())return this.setRunning(!1),this.emit("stop"),this.tracker_.removeListener("track",this.reemitTrackEvent_),this},function(){tracking.ColorTracker=function(t){tracking.ColorTracker.base(this,"constructor"),"string"==typeof t&&(t=[t]),t&&(t.forEach(function(t){if(!tracking.ColorTracker.getColor(t))throw new Error('Color not valid, try `new tracking.ColorTracker("magenta")`.')}),this.setColors(t))},tracking.inherits(tracking.ColorTracker,tracking.Tracker),tracking.ColorTracker.knownColors_={},tracking.ColorTracker.neighbours_={},tracking.ColorTracker.registerColor=function(t,r){tracking.ColorTracker.knownColors_[t]=r},tracking.ColorTracker.getColor=function(t){return tracking.ColorTracker.knownColors_[t]},tracking.ColorTracker.prototype.colors=["magenta"],tracking.ColorTracker.prototype.minDimension=20,tracking.ColorTracker.prototype.maxDimension=1/0,tracking.ColorTracker.prototype.minGroupSize=30,tracking.ColorTracker.prototype.calculateDimensions_=function(t,r){for(var e=-1,n=-1,i=1/0,a=1/0,o=0;o<r;o+=2){var c=t[o],s=t[o+1];c<i&&(i=c),c>e&&(e=c),s<a&&(a=s),s>n&&(n=s)}return{width:e-i,height:n-a,x:i,y:a}},tracking.ColorTracker.prototype.getColors=function(){return this.colors},tracking.ColorTracker.prototype.getMinDimension=function(){return this.minDimension},tracking.ColorTracker.prototype.getMaxDimension=function(){return this.maxDimension},tracking.ColorTracker.prototype.getMinGroupSize=function(){return this.minGroupSize},tracking.ColorTracker.prototype.getNeighboursForWidth_=function(t){if(tracking.ColorTracker.neighbours_[t])return tracking.ColorTracker.neighbours_[t];var r=new Int32Array(8);return r[0]=4*-t,r[1]=4*-t+4,r[2]=4,r[3]=4*t+4,r[4]=4*t,r[5]=4*t-4,r[6]=-4,r[7]=4*-t-4,tracking.ColorTracker.neighbours_[t]=r,r},tracking.ColorTracker.prototype.mergeRectangles_=function(t){for(var r,e=[],n=this.getMinDimension(),i=this.getMaxDimension(),a=0;a<t.length;a++){var o=t[a];r=!0;for(var c=a+1;c<t.length;c++){var s=t[c];if(tracking.Math.intersectRect(o.x,o.y,o.x+o.width,o.y+o.height,s.x,s.y,s.x+s.width,s.y+s.height)){r=!1;var h=Math.min(o.x,s.x),g=Math.min(o.y,s.y),k=Math.max(o.x+o.width,s.x+s.width),f=Math.max(o.y+o.height,s.y+s.height);s.height=f-g,s.width=k-h,s.x=h,s.y=g;break}}r&&o.width>=n&&o.height>=n&&o.width<=i&&o.height<=i&&e.push(o)}return e},tracking.ColorTracker.prototype.setColors=function(t){this.colors=t},tracking.ColorTracker.prototype.setMinDimension=function(t){this.minDimension=t},tracking.ColorTracker.prototype.setMaxDimension=function(t){this.maxDimension=t},tracking.ColorTracker.prototype.setMinGroupSize=function(t){this.minGroupSize=t},tracking.ColorTracker.prototype.track=function(t,r,e){var n=this,i=this.getColors();if(!i)throw new Error('Colors not specified, try `new tracking.ColorTracker("magenta")`.');var a=[];i.forEach(function(i){a=a.concat(n.trackColor_(t,r,e,i))}),this.emit("track",{data:a})},tracking.ColorTracker.prototype.trackColor_=function(e,n,i,a){var o,c,s,h,g,k=tracking.ColorTracker.knownColors_[a],f=new Int32Array(e.length>>2),u=new Int8Array(e.length),l=this.getMinGroupSize(),p=this.getNeighboursForWidth_(n),v=new Int32Array(e.length),m=[],y=-4;if(!k)return m;for(var d=0;d<i;d++)for(var w=0;w<n;w++)if(!u[y+=4]){for(o=0,g=-1,v[++g]=y,v[++g]=d,v[++g]=w,u[y]=1;g>=0;)if(s=v[g--],c=v[g--],k(e[h=v[g--]],e[h+1],e[h+2],e[h+3],h,c,s)){f[o++]=s,f[o++]=c;for(var T=0;T<p.length;T++){var C=h+p[T],_=c+t[T],E=s+r[T];!u[C]&&_>=0&&_<i&&E>=0&&E<n&&(v[++g]=C,v[++g]=_,v[++g]=E,u[C]=1)}}if(o>=l){var M=this.calculateDimensions_(f,o);M&&(M.color=a,m.push(M))}}return this.mergeRectangles_(m)},tracking.ColorTracker.registerColor("cyan",function(t,r,e){var n=t-0,i=r-255,a=e-255;return r-t>=50&&e-t>=70||n*n+i*i+a*a<6400}),tracking.ColorTracker.registerColor("magenta",function(t,r,e){var n=t-255,i=r-0,a=e-255;return t-r>=50&&e-r>=50||n*n+i*i+a*a<19600}),tracking.ColorTracker.registerColor("yellow",function(t,r,e){var n=t-255,i=r-255,a=e-0;return t-e>=50&&r-e>=50||n*n+i*i+a*a<1e4});var t=new Int32Array([-1,-1,0,1,1,1,0,-1]),r=new Int32Array([0,1,1,1,0,-1,-1,-1])}(),tracking.ObjectTracker=function(t){tracking.ObjectTracker.base(this,"constructor"),t&&(Array.isArray(t)||(t=[t]),Array.isArray(t)&&t.forEach(function(r,e){if("string"==typeof r&&(t[e]=tracking.ViolaJones.classifiers[r]),!t[e])throw new Error('Object classifier not valid, try `new tracking.ObjectTracker("face")`.')})),this.setClassifiers(t)},tracking.inherits(tracking.ObjectTracker,tracking.Tracker),tracking.ObjectTracker.prototype.edgesDensity=.2,tracking.ObjectTracker.prototype.initialScale=1,tracking.ObjectTracker.prototype.scaleFactor=1.25,tracking.ObjectTracker.prototype.stepSize=1.5,tracking.ObjectTracker.prototype.getClassifiers=function(){return this.classifiers},tracking.ObjectTracker.prototype.getEdgesDensity=function(){return this.edgesDensity},tracking.ObjectTracker.prototype.getInitialScale=function(){return this.initialScale},tracking.ObjectTracker.prototype.getScaleFactor=function(){return this.scaleFactor},tracking.ObjectTracker.prototype.getStepSize=function(){return this.stepSize},tracking.ObjectTracker.prototype.track=function(t,r,e){var n=this,i=this.getClassifiers();if(!i)throw new Error('Object classifier not specified, try `new tracking.ObjectTracker("face")`.');var a=[];i.forEach(function(i){a=a.concat(tracking.ViolaJones.detect(t,r,e,n.getInitialScale(),n.getScaleFactor(),n.getStepSize(),n.getEdgesDensity(),i))}),this.emit("track",{data:a})},tracking.ObjectTracker.prototype.setClassifiers=function(t){this.classifiers=t},tracking.ObjectTracker.prototype.setEdgesDensity=function(t){this.edgesDensity=t},tracking.ObjectTracker.prototype.setInitialScale=function(t){this.initialScale=t},tracking.ObjectTracker.prototype.setScaleFactor=function(t){this.scaleFactor=t},tracking.ObjectTracker.prototype.setStepSize=function(t){this.stepSize=t};

},{}],2:[function(require,module,exports){
"use strict";window.slider_=document.querySelector("input[type=range]"),window.output=document.getElementById("value"),window.video=document.getElementById("video"),window.videoCanvas=document.getElementById("video-canvas"),window.videoContext=videoCanvas.getContext("2d"),window.canvasRect=videoCanvas.getBoundingClientRect(),window.snapshotCanvas=document.getElementById("snapshotCanvas"),window.snapshotContext=snapshotCanvas.getContext("2d"),window.boundingBox=document.getElementById("boundingBox"),window.count={},window.bool=!1,window.colorDetect=void 0,window.capturing=!1,window.initialPoint=[],window.tracker=void 0,window.trackerTask=void 0;var config={width:320,height:240,color:["black","magenta","cyan","yellow"]};module.exports=config;

},{}],3:[function(require,module,exports){
const config=require("./_variable");require("../../bower_components/tracking/build/tracking");const traits=require("./traits");function onTrack(t){if("3"==document.querySelector("select").value){var e=new MarvinImage;let t=document.getElementById("findTextRegions");e.load(videoCanvas.toDataURL("image/png"),function(){var n=Marvin.findTextRegions(e,15,8,30,150);traits.drawSegments(n,e),e.draw(t)})}else{if(boundingBox.style.display="none",snapshotContext.clearRect(0,0,snapshotCanvas.width,snapshotCanvas.height),snapshotContext.beginPath(),t.data.length<=0)return;let e=t.data.sort((t,e)=>t.y<e.y?-1:1).slice(0,2);e.sort((t,e)=>t.x<e.x?-1:1).forEach(function(t,n){if(0==n){if(boundingBox.style.display="block",boundingBox.style.left=t.x+"px",boundingBox.style.top=t.y+"px",boundingBox.style.height=t.height+"px",1==document.getElementById("twoObject").checked){let n=e[e.length-1].width+e[e.length-1].x-t.x;boundingBox.style.width=n+"px",snapshotContext.drawImage(videoCanvas,t.x,t.y,n,t.height,0,0,3*n,3*t.height)}else boundingBox.style.width=t.width+"px",snapshotContext.drawImage(videoCanvas,t.x+.1*t.width,t.y+.02*t.height,t.width-.15*t.width,t.height-.25*t.height,0,0,2*t.width,2*t.height);let n=count.hasOwnProperty(t.color)?count[t.color]+1:1;count[t.color]=n;let o=Object.values(count).sort((t,e)=>e-t)[0];if(o>100&&0==bool){let t=Object.keys(count).filter(function(t){return count[t]===o})[0];setTimeout(()=>setColor([t]),1e3),bool=!0,count={}}count.hasOwnProperty(t.color)&&count[t.color]>100&&(count[t.color]=0)}})}}function setColor(t){trackerTask.stop(),tracker=new tracking.ColorTracker(config.color),trackerTask=tracking.track(video,tracker,{camera:!0}),tracker.on("track",onTrack),colorDetect=t}exports.slider=function(){output.innerHTML=slider_.value,slider_.oninput=function(){output.innerHTML=this.value}},exports.boundBox=function(){videoCanvas.addEventListener("mousedown",function(t){initialPoint=[t.pageX,t.pageY],capturing=!0}),videoCanvas.addEventListener("mousemove",function(t){if(capturing){let e=Math.min(initialPoint[0],t.pageX),n=Math.min(initialPoint[1],t.pageY),o=Math.max(initialPoint[0],t.pageX)-e,i=Math.max(initialPoint[1],t.pageY)-n;boundingBox.style.display="block",boundingBox.style.left=e+"px",boundingBox.style.top=n+"px",boundingBox.style.width=o+"px",boundingBox.style.height=i+"px",boundingBox.setAttribute("dx",e),boundingBox.setAttribute("dy",n),boundingBox.setAttribute("dWidth",o),boundingBox.setAttribute("dHeight",i)}}),document.addEventListener("mouseup",()=>capturing=!1)},exports.webcamera=function(t){var e={video:!0},n=function(t){console.log("An error has occurred!",t)};window.addEventListener("DOMContentLoaded",function(){navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia(e).then(function(t){video.srcObject=t,video.play()}):navigator.getUserMedia?navigator.getUserMedia(e,function(t){video.src=t,video.play()},n):navigator.webkitGetUserMedia?navigator.webkitGetUserMedia(e,function(t){video.src=window.webkitURL.createObjectURL(t),video.play()},n):navigator.mozGetUserMedia&&navigator.mozGetUserMedia(e,function(t){video.src=window.URL.createObjectURL(t),video.play()},n),traits.requestFrame()},!1)},exports.track=function(){tracking.ColorTracker.registerColor("black",function(t,e,n){return t<60&&e<60&&n<60}),tracker=new tracking.ColorTracker(config.color),trackerTask=tracking.track(video,tracker,{camera:!0}),trackerTask.on("track",onTrack)},exports.action=function(){document.querySelector("input[name=reset]").addEventListener("click",t=>{setColor(color),bool=!1}),document.querySelector("select").addEventListener("change",t=>{if(boundingBox.style.display="none",0==t.target.value||3==t.target.value){if(!trackerTask.running_){let t=colorDetect||color;tracker=new tracking.ColorTracker(t),trackerTask=tracking.track(video,tracker,{camera:!0}),tracker.on("track",onTrack)}}else trackerTask.stop()}),document.querySelector("button[name=take]").addEventListener("click",t=>{if(!trackerTask.running_)if(snapshotContext.clearRect(0,0,snapshotCanvas.width,snapshotCanvas.height),snapshotContext.beginPath(),2==document.querySelector("select").value&&initialPoint){let t=boundingBox.getAttribute("dx"),e=boundingBox.getAttribute("dy"),n=boundingBox.getAttribute("dWidth"),o=boundingBox.getAttribute("dHeight");snapshotContext.drawImage(videoCanvas,t,e,n,o,0,0,3*n,3*o)}else snapshotContext.drawImage(videoCanvas,0,0);traits.recognize()})};

},{"../../bower_components/tracking/build/tracking":1,"./_variable":2,"./traits":7}],4:[function(require,module,exports){
!function(){function e(e,r,t){this.width=r,this.height=t,this.data=e}function r(e,r,t){if(4!==(e.width&&e.height?e.data.length/(e.width*e.height):e.length/(r*t)))throw new Error("data and size of the image does now match")}function t(t,o,a){if(r(t,o,a),!(t instanceof Uint8ClampedArray))throw new Error("pixel data passed is not an Uint8ClampedArray");return"object"==typeof window?new window.ImageData(t,o,a):new e(t,o,a)}function o(e,r){if((r=r||{}).monochrome=r.monochrome||!1,r.divisor=r.divisor||1,r.median=r.median||!1,!r.filter||!r.radius)throw new Error("Required options missing. filter : "+r.filter+", radius: "+r.radius);var o=e.width*e.height,a=e.data.length/o;if(4!==a&&1!==a)throw new Error("ImageObject has incorrect color depth");var n,i,h,d,l,c,m,f,u=new Uint8ClampedArray(o*(r.monochrome||4)),s=e.height,w=e.width,v=r.filter,g=r.radius;for(n=0;n<a;n++){for(i=g;i<s-g;i++)for(h=g;h<w-g;h++)if(f=(h+i*w)*a+n,3!==n){for(c=[],d=-g;d<2*g;d++)for(l=-g;l<2*g;l++)c.push(e.data[(h+l+(i+d)*w)*a+n]);m=r.median?c.sort()[Math.floor(c.length/2)]:c.map(function(e,r){return e*v[r]}).reduce(function(e,r){return e+r})/r.divisor,4===a&&r.monochrome?u[h+i*w]=m:u[f]=m}else{if(4===a&&r.monochrome){u[h+i*w]=e.data[h+i*w];continue}u[f]=e.data[f]}for(i=0;i<s;i++)for(h=0;h<w;h++)if(4===a&&r.monochrome){if(i<g||i>s-2*g){u[h+i*w]=e.data[h+i*w];continue}(h<g||h>w-2*g)&&(u[h+i*w]=e.data[h+i*w])}else f=(h+i*w)*a+n,i<g||i>s-2*g?u[f]=e.data[f]:(h<g||h>w-2*g)&&(u[f]=e.data[f])}return t(u,e.width,e.height)}function a(e,o){r(e),(o=o||{}).mode=o.mode||"luma",o.channel=o.channel||"g";var a,n,i,h={luma:function(e,r,t){return.299*e+.587*r+.114*t},simple:function(e,r,t,o,a){return arguments[{r:0,g:1,b:2}[a]]},average:function(e,r,t){return(e+r+t)/3}},d=e.width*e.height,l=new Uint8ClampedArray(4*d);for(a=0;a<d;a++)i=4*a,n=h[o.mode](e.data[i],e.data[i+1],e.data[i+2],e.data[i+3],o.channel),l[i]=n,l[i+1]=n,l[i+2]=n,l[i+3]=e.data[i+3];return t(l,e.width,e.height)}var n={blur:function(e,r){(r=r||{}).monochrome=r.monochrome||!1,r.type=r.type||"gaussian";var t={average:[1,1,1,1,1,1,1,1,1],gaussian:[1,2,1,2,4,2,1,2,1]};if(!t[r.type])throw new Error("Could not find type of filter requested");var a=t[r.type];return o(e,{filter:a,divisor:a.reduce(function(e,r){return e+r}),radius:1,monochrome:r.monochrome})},brightness:function(e,o){r(e),(o=o||{}).level=o.level||0;var a,n,i=e.width*e.height,h=o.level,d=new Uint8ClampedArray(4*i);for(a=0;a<i;a++)d[n=4*a]=e.data[n]+h,d[n+1]=e.data[n+1]+h,d[n+2]=e.data[n+2]+h,d[n+3]=e.data[n+3];return t(d,e.width,e.height)},contrast:function(e,r){(r=r||{}).monochrome=r.monochrome||!1,r.level=r.level||1;var o=e.width*e.height,a=e.data.length/o,n=r.level;if(4!==a&&1!==a)throw new Error("ImageObject has incorrect color depth");var i,h,d,l=new Uint8ClampedArray(o*(r.monochrome||4));for(i=0;i<o;i++)if(1!==a)l[h=4*i]=(e.data[h]-128)*n+128,l[h+1]=(e.data[h+1]-128)*n+128,l[h+2]=(e.data[h+2]-128)*n+128,l[h+3]=e.data[h+3];else{if(d=(e.data[i]-128)*n+128,r.monochrome){l[i]=d;continue}l[h]=d,l[h+1]=d,l[h+2]=d,l[h+3]=255}return t(l,e.width,e.height)},despeckle:function(e,r){(r=r||{}).monochrome=r.monochrome||!1,r.type=r.type||"median";var t={median:[1,1,1,1,1,1,1,1,1],mean:[1,1,1,1,1,1,1,1,1]};if(!t[r.type])throw new Error("Could not find type of filter requested");var a=t[r.type];return o(e,{filter:a,divisor:a.reduce(function(e,r){return e+r}),radius:1,monochrome:r.monochrome,median:"median"===r.type})},dither:function(e,r){return t(_pixelData_,_width_,_height_)},edge:function(e,r){(r=r||{}).monochrome=r.monochrome||!1,r.level=r.level||1,r.type=r.type||"laplacian";var t=e.width*e.height,n=e.data.length/t;if(4!==n&&1!==n)throw new Error("ImageObject has incorrect color depth");4===n&&(e=a(e));var i={laplacian:[-1,-1,-1,-1,8,-1,-1,-1,-1]};if(!i[r.type])throw new Error("Could not find type of filter requested");var h=i[r.type];return o(e,{filter:h,divisor:h.length/r.level,radius:1,monochrome:r.monochrome})}};n.grayscale=a,n.invert=function(e){r(e);var o,a=e.data.length,n=new Uint8ClampedArray(a);for(o=0;o<a;o++)n[o]=(o+1)%4!=0?255-e.data[o]:e.data[o];return t(n,e.width,e.height)},n.posterize=function(e,o){r(e),(o=o||{}).level=o.level||4;var a,n,i,h,d,l=e.width*e.height,c=new Uint8ClampedArray(4*l),m=new Uint8Array(256),f=256/(o.level-1),u=256/o.level;for(a=0;a<o.level;a++)for(n=0;n<u;n++)i=Math.round(a*u+n),a!==o.level-1?m[i]=a*f:m[i]=255;for(h=0;h<l;h++)c[d=4*h]=m[e.data[d]],c[d+1]=m[e.data[d+1]],c[d+2]=m[e.data[d+2]],c[d+3]=e.data[d+3];return t(c,e.width,e.height)},n.sharpen=function(e,r){return(r=r||{}).monochrome=r.monochrome||!1,r.level=r.level||1,o(e,{filter:[0,-r.level,0,-r.level,4*r.level+1,-r.level,0,-r.level,0],radius:1,monochrome:r.monochrome})},n.solarize=function(e,r){(r=r||{}).monochrome=r.monochrome||!1;var o=e.width*e.height,a=e.data.length/o;if(4!==a&&1!==a)throw new Error("ImageObject has incorrect color depth");var n,i,h,d,l,c=new Uint8ClampedArray(o*(r.monochrome||4)),m=new Uint8Array(256);for(r.level,n=0;n<3;n++)for(s=0;s<256/3;s++)if(i=Math.round(n*(256/3)+s),(n+1)%2){if(n+1>=256/3){m[i]=255;continue}m[i]=3*s,console.log(3*s)}else m[i]=255-3*s;for(console.log(m),h=0;h<o;h++)if(1!==a)c[d=4*h]=m[e.data[d]],c[d+1]=m[e.data[d+1]],c[d+2]=m[e.data[d+2]],c[d+3]=e.data[d+3];else{if(l=m[e.data[h]],r.monochrome){c[h]=l;continue}c[d]=l,c[d+1]=l,c[d+2]=l,c[d+3]=255}return t(c,e.width,e.height)},n.threshold=function(e,o){r(e),(o=o||{}).level=o.level||127,o.grayscaled=o.grayscaled||!1;var n=e.width*e.height,i=e.data;o.grayscaled||(i=a(e).data);var h,d,l,c=new Uint8ClampedArray(4*n),m=new Uint8Array(256);for(h=o.level;h<256;h++)m[h]=255;for(d=0;d<n;d++)c[l=4*d]=m[i[l]],c[l+1]=m[i[l+1]],c[l+2]=m[i[l+2]],c[l+3]=e.data[l+3];return t(c,e.width,e.height)},n.pseudocolor=function(e,o){r(e),(o=o||{}).grayscaled=o.grayscaled||!1;var n=e.width*e.height,i=e.data;o.grayscaled||(i=a(e).data);var h,d,l=new Uint8ClampedArray(4*n),c=new Uint8ClampedArray(256),m=new Uint8ClampedArray(256),f=new Uint8ClampedArray(256);for(c.forEach(function(e,r){var t=0;r>128&&r<192&&(t=4*(r-128)),r>=192&&(t=255),c[r]=t}),m.forEach(function(e,r){var t=255;r<64&&(t=4*r),r>=192&&(t=255-4*(r-191)),m[r]=t}),f.forEach(function(e,r){var t=0;r>64&&r<128&&(t=255-4*(r-63)),r<65&&(t=255),f[r]=t}),h=0;h<n;h++)l[d=4*h]=c[i[d]],l[d+1]=m[i[d+1]],l[d+2]=f[i[d+2]],l[d+3]=e.data[d+3];return t(l,e.width,e.height)},"object"==typeof module&&module.exports?module.exports=n:this.grafi=n}();

},{}],5:[function(require,module,exports){
var text=require("./text.js"),features=require("./features.js");exports.print=function(e){e=text.capitalize(e),console.log(e)},exports.initialize=function(e){features.slider(),features.boundBox(),features.webcamera(),features.track(),features.action(),document.querySelector("button[name=take]").click(),e()};

},{"./features.js":3,"./text.js":6}],6:[function(require,module,exports){
exports.capitalize=function(e){return e.charAt(0).toUpperCase()+e.slice(1)};

},{}],7:[function(require,module,exports){
const{width:width,height:height}=require("./_variable"),grafi=require("./grafi.js");function sleep(e){return new Promise(t=>setTimeout(t,e))}function requestFrame(){window.requestAnimationFrame(function(){if(videoContext.clearRect(0,0,width,height),video.readyState===video.HAVE_ENOUGH_DATA)try{videoContext.drawImage(video,0,0,width,height)}catch(e){}requestFrame()})}exports.recognize=function(){var e=fx.canvas();let t=e.texture(snapshotCanvas);e.draw(t).noise(0).update(),document.querySelector("[name=unsharp]").checked&&e.draw(t).unsharpMask(20,2).update(),document.querySelector("[name=bright]").checked&&e.draw(t).brightnessContrast(.4,.9).update();let a=document.getElementById("step1").getContext("2d");a.clearRect(0,0,width,height),a.beginPath(),a.drawImage(e,0,0);let n=document.getElementById("step2"),i=n.getContext("2d");i.clearRect(0,0,width,height),i.beginPath();let h=a.getImageData(0,0,width,height);i.putImageData(grafi.grayscale(h),0,0);let d=document.getElementById("step3").getContext("2d");if(d.clearRect(0,0,width,height),d.beginPath(),1==document.getElementById("blueComp").checked){let e=(h=i.getImageData(0,0,width,height)).data;for(var g=0;g<e.length;g+=4)e[g]=0,e[g+1]=0,e[g+2]=255^e[g+2];d.putImageData(h,0,0)}else d.drawImage(n,0,0);let o=document.getElementById("step4"),r=o.getContext("2d");r.clearRect(0,0,width,height),r.beginPath(),h=d.getImageData(0,0,width,height),r.putImageData(grafi.brightness(h,{level:0}),0,0);let s=document.getElementById("step5"),l=s.getContext("2d");l.clearRect(0,0,width,height),l.beginPath(),1==document.getElementById("isThreshold").checked?(h=r.getImageData(0,0,width,height),l.putImageData(grafi.threshold(h,{level:document.querySelector("input[type=range]").value}),0,0)):l.drawImage(o,0,0);let c=document.getElementById("output").getContext("2d");c.clearRect(0,0,snapshotCanvas.width,snapshotCanvas.height),c.beginPath(),c.fillStyle="rgb(255, 255, 255)",c.fillRect(0,0,snapshotCanvas.width,snapshotCanvas.height),c.drawImage(s,0,0);var u={lang:"eng"};1==document.getElementById("number").checked&&(u.tessedit_char_whitelist="0123456789"),Tesseract.recognize(c,u).then(function(e){document.getElementById("result").innerHTML=e.text,async function(){await sleep(200)}(),document.querySelector("button[name=take]").click()})},exports.requestFrame=requestFrame,exports.drawSegments=function(e,t){for(var a in snapshotContext.clearRect(0,0,snapshotCanvas.width,snapshotCanvas.height),snapshotContext.beginPath(),e){var n=e[a];n.height>=5&&t.drawRect(n.x1,n.y1-10,n.width,n.height+15,4294901760)}let i=e.filter(e=>e.height>=5);if(boundingBox.style.display="none",i.length){boundingBox.style.display="block",boundingBox.style.left=i[0].x1+"px",boundingBox.style.top=i[0].y1-10+"px",boundingBox.style.width=i[0].width+"px";let e=i[i.length-1].height+i[i.length-1].y1-i[0].y1;boundingBox.style.height=e+15+"px",snapshotContext.drawImage(videoCanvas,i[0].x1,i[0].y1-10,i[0].width,e+15,0,0,3*i[0].width,3*(e+15))}};

},{"./_variable":2,"./grafi.js":4}],8:[function(require,module,exports){
var myModule=require("./lib/myModule.js");myModule.initialize(function(){myModule.print("hellow world!!")});

},{"./lib/myModule.js":5}]},{},[8]);
